var error=!1,allInputs=$("input"),allBriefingInputs=$(".briefing-summary input"),defaultRateInput=$(".defaultRate"),allRates=$("input.right"),counterValue=$("span.counter-value"),totalEffortSpan=$("span.total-effort"),totalPriceSpan=$("span.section-sum-money"),totalTimeSpan=$("span.section-sum-time"),averageRateSpan=$("span.average-rate"),totalCalculatet=$("div.total-calculatet"),totalPauschal=$("div.total-pauschal"),linkPauschal=$("#link-pauschal"),linkTime=$("#link-time"),settingsTime=$("#settings-time"),settingsPauschal=$("#settings-pauschal"),pauschalPriceInput=$('input[name="pauschal-price"]'),mwstPartSpan=$("span.mwst-part"),numberOfSections=$('div[class^="briefing-section"]').length;console.log(numberOfSections),linkPauschal.click(function(t){settingsTime.slideUp("slow"),settingsPauschal.slideDown("slow"),linkPauschal.addClass("active"),linkTime.removeClass("active"),allBriefingInputs.hide("slow"),totalCalculatet.slideUp("slow"),totalPauschal.slideDown("slow"),totalTimeSpan.slideUp("slow"),totalPriceSpan.slideUp("slow"),t.preventDefault()}),linkTime.click(function(t){settingsPauschal.slideUp("slow"),settingsTime.slideDown("slow"),linkTime.addClass("active"),linkPauschal.removeClass("active"),allBriefingInputs.show("slow"),totalCalculatet.slideDown("slow"),totalPauschal.slideUp("slow"),totalTimeSpan.slideDown("slow"),totalPriceSpan.slideDown("slow"),pauschalPriceInput.val(0),t.preventDefault()}),allInputs.change(function(){var t=parseInt(pauschalPriceInput.val());if(0!=t){var a=parseInt($("input[name=mwst2]").val())/100+1;pauschalPriceFinal=Math.round(t*a);var e=pauschalPriceFinal-t;return mwstPartSpan.text(e),void counterValue.text(pauschalPriceFinal)}var s=defaultRateInput.val(),n=parseInt(s),l=$("input.right");$.each(l,function(){$(this).attr("value",n)});var i=!1;$.each(allInputs,function(){InputInt=parseInt($(this).val()),isNaN(InputInt)?($(this).addClass("error"),$(this).val(0),i=!0):$(this).removeClass("error")}),1==i&&alert("Nur numerische Werte zulÃ¤ssig");var r=parseInt($("input[name=mwst]").val())/100+1,u=1-parseInt($("input[name=discount]").val())/100,o=1,p=1,c=0,m=0,v=0,h=0,d=0,f=0,I=0,I=0;for(o=1;numberOfSections+1>o;o++){var d=0,h=0,w=$(".briefing-section-"+o).find(".left").length;for(p=1;w+1>p;p++){var c=$(".effort-"+o+"-"+p),m=$(".rate-"+o+"-"+p),v=parseInt(c.val())*parseInt(m.val());isNaN(v)||(h+=v,d+=parseInt(c.val()))}var g=$("span.section-sum-"+o),P=$("span.section-time-"+o);g.text(h),P.text(d);{parseInt($("span.section-sum-1").text()),parseInt($("span.section-sum-2").text()),parseInt($("span.section-sum-3").text()),parseInt($("span.section-sum-4").text())}f+=h,I+=d}var S=Math.round(f*u*r),S=Math.round(f*u*r),k=parseInt(S/I),x=Math.round(f*u*r-f*u);mwstPartSpan.text(x),averageRateSpan.text(k),totalEffortSpan.text(I),counterValue.text(S)});
